#!/bin/bash
LOG="rocm_check.log"
echo "🔍 Komponententest gestartet: $(date)" > "$LOG"

# HIP Check
echo -e "\n🚀 HIP Test..." | tee -a "$LOG"
hipcc --version &>/dev/null && HIP_STATUS="✅ verfügbar" || HIP_STATUS="❌ fehlt"

# Jupyter Check
echo -e "\n📘 Jupyter Test..." | tee -a "$LOG"
python3 -c "from notebook import notebookapp" &>/dev/null && JUPYTER_STATUS="✅ verfügbar" || JUPYTER_STATUS="❌ fehlt"

# Blender Check
echo -e "\n🎨 Blender Test..." | tee -a "$LOG"
blender --version &>/dev/null && BLENDER_STATUS="✅ verfügbar" || BLENDER_STATUS="❌ fehlt"

# TensorFlow Check
echo -e "\n🧠 TensorFlow Test..." | tee -a "$LOG"
python3 -c "import tensorflow" &>/dev/null && TENSORFLOW_STATUS="✅ verfügbar" || TENSORFLOW_STATUS="❌ fehlt"

# 🧾 Tabelle
echo -e "\n📊 Komponententabelle:" | tee -a "$LOG"
TABLE=$(cat <<TAB
| Komponente   | Funktionstest       | Status         |
|--------------|---------------------|----------------|
| HIP          | hipcc --version     | ${HIP_STATUS}  |
| Jupyter      | Python-Import        | ${JUPYTER_STATUS} |
| Blender      | blender --version    | ${BLENDER_STATUS} |
| TensorFlow   | Python-Import        | ${TENSORFLOW_STATUS} |
TAB
)
echo "$TABLE" | tee -a "$LOG"

echo -e "\n✅ Komponententest abgeschlossen. Ergebnisse siehe: $LOG"
